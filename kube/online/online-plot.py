from kubernetes import client, config, watch
from kubernetes.client.rest import ApiException

from pprint import pprint
import time
import json
import math
import argparse

import matplotlib.pyplot as plt
import matplotlib.animation as animation
from matplotlib import style
import numpy as np
from statsmodels.tsa.api import ExponentialSmoothing
from statsmodels.tsa.holtwinters import SimpleExpSmoothing
from sklearn.metrics import mean_squared_error
from pandas import read_csv
from matplotlib import pyplot
import threading

import warnings
from statsmodels.tools.sm_exceptions import ConvergenceWarning
warnings.simplefilter('ignore', ConvergenceWarning)
warnings.simplefilter(action='ignore', category=FutureWarning)

# Import seaborn
import seaborn as sns

#PARAMETERS
params = {
    "window_future": 24, 
    "window_past": 1, 
    "lstm_target": 90, 
    "lstm_upper": 98, 
    "lstm_lower": 60, 
    "pred_target": 90, 
    "HW_upper": 98, 
    "HW_lower": 60, 
    "season_len": 144, 
    "history_len": 4*144, 
    "rescale_buffer": 120, 
    "rescale_cooldown": 18, 
}
#--------------------------------------------------------------

# Apply the default theme
sns.set_theme()


parser = argparse.ArgumentParser()

parser.add_argument("-d", "--dep_name", help="Deployment name", default="nginx-deployment")
parser.add_argument("-c", "--cont_name", help="Container name", default="nginx")
parser.add_argument("-v", "--vpa_name", help="VPA name", default="my-rec-vpa")



args = parser.parse_args()

# Plots 
fig1 = plt.figure(1)
fig2 = plt.figure(2)
ax1 = fig1.add_subplot(1,1,1)
ax2 = fig2.add_subplot(1,1,1)

# Record VPA or not
plotVPA = True

# Use LSTM or HW
use_lstm = True
print("use_lstm:", use_lstm)

vpa_x = []
vpa_targets = []
vpa_lowers = []
vpa_uppers = []

cpu_x = []
cpu_usages = []
cpu_requests = []

cpu_x2 = []
cpu_usages2 = []
cpu_requests2 = []

cpu_requests_total = []
cpu_usages_total = []

pred_x = []
pred_targets = []
pred_lowers = []
pred_uppers = []

cpu_slacks = []
vpa_slacks = []



def plot_slack():
    global fig2, ax2
    global cpu_slacks, vpa_slacks

    ax2.clear()
    skip = params["season_len"]*2
    #print(cpu_x[skip:])
    #print(cpu_slacks)
    ax2.plot(cpu_x[skip:], cpu_slacks, 'b--', linewidth=2, label='CPU slack')
    ax2.plot(cpu_x[skip:], vpa_slacks, 'g-', linewidth=2, label='VPA slack')
    leg = ax2.legend(loc='lower center', bbox_to_anchor=(0.5, -0.30), fancybox=True, shadow=True, ncol=6, fontsize=15)
    leg_lines = leg.get_lines()
    plt.setp(leg_lines, linewidth=5)


    ax2.set_xlabel('Time (s)', fontsize=20)
    ax2.set_ylabel('CPU (millicores)', fontsize=20)
   
        
        
# Plot the main graph, do not show
# VPA target, CPU requests/usage, LSTM bounds
def plot_main():
    global fig1, ax1
    global vpa_x, vpa_targets, cpu_x, cpu_usages, cpu_requests, cpu_x2, cpu_usages2, cpu_requests2, pred_x, pred_targets, pred_lowers, pred_uppers, cpu_requests_total, cpu_usages_total

    ax1.clear()
    
    
    # ax1.plot(pred_x, pred_targets, 'r-', linewidth=2,label='Prediction target')
    # ax1.fill_between(pred_x, pred_lowers, pred_uppers, facecolor='red', alpha=0.3, label="Prediction bounds")  
    ax1.plot(cpu_x, cpu_requests, 'r--', linewidth=2, label='CPU requested p1 ')
    ax1.plot(cpu_x, cpu_usages, 'r-', linewidth=1,label='CPU usage p1')
    ax1.plot(cpu_x, cpu_requests2, 'b--', linewidth=2, label='CPU requested p2')
    ax1.plot(cpu_x, cpu_usages2, 'b-', linewidth=1,label='CPU usage p2')
    ax1.plot(cpu_x, cpu_requests_total, 'g--', linewidth=2, label='CPU requested total')
    #ax1.plot(cpu_x, cpu_usages_total, 'g-', linewidth=1,label='CPU usage total')
    ax1.plot(vpa_x, vpa_targets, 'y--', linewidth=2,label='VPA target total')

    leg1 = ax1.legend(loc='lower center', bbox_to_anchor=(0.5, -0.30), fancybox=True, shadow=True, ncol=6, fontsize=15)
    leg1_lines = leg1.get_lines()
    plt.setp(leg1_lines, linewidth=5)

    ax1.set_xlabel('Observation', fontsize=20)
    ax1.set_ylabel('CPU (millicores)', fontsize=20)
    ax1.set_xlim(left=params["season_len"]*2)
    ax1.set_ylim(top=1000)
    
        


def main():
    # Configs can be set in Configuration class directly or using helper
    # utility. If no argument provided, the config will be loaded from
    # default location.

    global vpa_x, vpa_targets, cpu_x, cpu_usages, cpu_requests, cpu_x2, cpu_usages2, cpu_requests2, pred_x, pred_targets, pred_lowers, pred_uppers, cpu_requests_total, cpu_usages_total
    global plotVPA 
    global fig1, fig2, ax1, ax2
    plotVPA = True

    # Fast initialize-------------------------------------------------------
    # np.random.seed(13)
    # series = create_sin_noise(A=300, D=200, per=params["season_len"], total_len=2*params["season_len"])
    # cpu_usages = series.tolist()
    # cpu_usages = [70.945423, 65.442296, 64.409863, 119.784497, 135.455987, 132.949178, 136.771872, 175.153478, 185.904079, 183.262895, 192.68772, 227.425753, 254.816212, 254.478113, 260.506071, 303.346596, 308.617227, 299.22515, 305.235282, 311.828772, 337.069025, 341.031472, 343.669081, 328.119776, 338.280342, 344.441163, 344.441163, 335.140099, 350.777963, 349.91699, 340.089565, 377.237572, 374.370458, 376.32487, 361.708703, 406.344532, 405.11971, 405.017317, 408.076594, 408.210802, 406.260407, 406.374084, 407.719058, 406.356785, 406.362214, 406.362214, 404.446423, 387.809218, 408.078899, 408.078899, 372.243456, 372.243456, 376.154602, 377.50961, 376.743622, 349.482621, 349.482621, 347.499424, 347.499424, 336.362507, 345.883619, 337.922989, 341.92927, 331.631114, 337.574917, 332.435077, 332.435077, 325.964683, 307.368739, 311.580147, 301.298436, 252.496212, 270.463215, 256.371774, 265.598395, 205.370252, 194.007955, 190.262442, 195.444643, 139.251378, 142.869633, 135.796605, 112.902592, 66.472793, 66.472793, 66.193411, 67.865584, 66.77803, 66.77803, 70.657887, 67.437995, 68.226009, 67.539034, 66.349509, 64.506136, 66.219697, 67.510551, 67.991665, 67.068337, 66.33974, 62.580748, 65.642412, 66.541548, 70.586391, 64.729692, 67.637338, 68.881708, 67.422404, 64.984688, 65.97749, 64.506194, 69.634008, 68.147372, 66.590158, 67.052963, 67.052963, 71.358626, 68.882216, 69.519414, 69.519414, 70.228999, 74.246052, 68.462505, 73.169358, 70.098157, 65.387362, 72.08145, 71.065703, 67.787508, 67.787508, 66.458999, 68.932161, 68.626819, 66.414441, 69.212387, 74.520871, 64.554352, 64.477423, 69.332949, 68.953759, 71.484296, 64.172944, 62.394221, 70.175386, 68.779043, 66.403721, 67.570241, 144.856782, 144.856782, 143.247413, 140.610964, 167.288596, 194.501547, 190.03789, 189.772435, 215.651063, 265.392033, 251.205724, 269.74442, 283.230117, 283.230117, 307.84315, 306.034056, 316.582364, 338.444161, 346.708794, 337.349865, 337.349865, 344.826399, 343.451073, 344.821114, 349.517567, 351.68738, 347.484378, 337.902327, 376.243902, 378.518296, 377.202081, 377.202081, 407.452107, 407.452107, 405.998908, 404.946085, 392.102185, 408.492917, 407.493804, 408.369267, 407.863674, 406.321005, 409.703717, 391.433347, 406.054267, 406.771528, 404.792209, 386.355485, 377.29304, 377.407228, 377.480392, 379.254246, 344.950444, 348.037006, 352.364188, 348.345395, 323.045971, 339.935917, 347.251705, 343.856943, 298.840484, 331.755164, 343.582499, 320.213632, 300.478595, 307.248907, 307.812206, 291.884867, 261.702297, 259.051078, 262.933378, 256.393071, 182.59464, 190.104381, 189.615586, 184.850591, 146.253126, 141.016502, 142.792523, 131.8115, 131.8115, 68.825431, 66.605583, 67.565538, 63.642538, 66.383205, 64.75593, 67.763187, 70.798345, 66.71584, 66.490961, 66.544909, 71.078104, 63.922763, 67.359739, 67.359739, 68.505196, 67.824338, 67.923622, 65.67874, 68.718988, 68.718988, 69.227808, 68.567626, 66.236974, 66.717442, 70.859004, 64.59916, 71.125389, 71.233049, 71.233049, 67.978006, 69.599998, 65.841129, 65.242505, 70.706964, 66.175486, 65.676652, 68.72556, 65.771229, 68.517979, 70.358395, 66.507317, 66.69204, 67.858524, 66.551129, 64.101733, 71.257589, 71.290914, 68.487113, 68.487113, 69.81107, 69.81107, 71.721427, 65.040494, 66.710092, 68.665638, 66.996037, 62.962659, 62.962659, 69.487323, 67.348318, 64.879687, 64.16536]
    
    #cpu_slacks: [191.0, 335.0, 335.0, 273.689252, 266.45570499999997, 245.038308, 205.447037, 193.63624, 206.792848, 174.072552, 150.778968, 146.991105, 163.702748, 77.89615900000001, 79.92741000000001, 78.103474, 68.59461599999997, 77.24584599999997, 26.848918000000026, 235.84891800000003, 277.576259, 277.576259, 196.22965399999998, 202.787507, 211.650964, 200.60044499999998, 196.394876, 202.439774, 209.486622, 209.486622, 198.54742900000002, 194.581346, 208.12651599999998, 208.12651599999998, 163.988472, 168.280325, 164.788788, 174.084905, 139.970434, 138.188158, 137.58628199999998, 175.87975, 136.171084, 81.17108400000001, 108.22674799999999, 80.97227199999998, 80.97227199999998, 82.48359699999997, 83.87080700000001, 103.52276, 81.57653699999997, 80.33682499999998, 80.36129699999998, 127.41200400000002, 104.33819799999998, 104.33819799999998, 150.227377, 138.44698599999998, 140.55819200000002, 140.975863, 158.806174, 139.100391, 139.100391, 145.013166, 166.43305600000002, 166.43305600000002, 166.43305600000002, 112.43305600000002, 110.46092099999998, 136.61423000000002, 129.74615599999998, 130.951483, 130.951483, 151.290323, 178.81528300000002, 175.551779, 175.551779, 251.164917, 248.476855, 243.938527, 243.938527, 270.260736, 300.357173, 300.357173, 62.35717299999999, 132.13781899999998, 130.113854, 130.50174199999998, 132.139722, 137.193666, 129.06390299999998, 130.831084, 130.72220199999998, 127.23416, 126.630356, 127.233747, 127.853337, 132.807803, 131.531771, 127.907526, 133.361906, 129.484733, 128.63421, 128.212946, 131.82367399999998, 131.119227, 130.456378, 127.665496, 130.46245, 130.284255, 125.72951, 125.221963, 130.379355, 129.218643, 129.218643, 126.321812, 128.95055200000002, 130.113887, 131.539118, 129.993228, 129.12087300000002, 131.955725, 131.955725, 131.330088, 135.69427000000002, 130.502261, 131.679488, 129.22810099999998, 128.918102, 128.706385, 129.206724, 180.898072, 180.898072, 184.483641, 184.483641, 185.728249, 184.993309, 178.277083, 182.523202, 183.334964, 182.1346, 183.419305, 181.926463, 181.926463, 182.325807, 185.947815, 180.238898, 181.405597, 181.405597, 167.950976, 110.00546800000001, 115.96500800000001, 115.96500800000001, 209.826934, 193.799784, 192.551453, 192.551453, 184.358194, 118.695244, 114.50717900000001, 119.246002, 62.13899300000003, 59.465660000000014, 67.545009, 58.678743999999995, 76.16013700000002, 32.069237999999984, 36.42897199999999, 34.27267899999998, 48.03664900000001, 48.03664900000001, 201.036649, 208.68940700000002, 209.49336499999998, 176.23121600000002, 182.725217, 178.163415, 187.555178, 146.28902900000003, 150.364121, 141.34578499999998, 149.306582, 114.19066600000002, 110.14772900000003, 106.051083, 128.797758, 115.68337200000002, 106.75713100000002, 111.92041499999999, 108.28444400000001, 108.28444400000001, 108.03475800000001, 109.52355399999999, 142.79899999999998, 120.171111, 115.918433, 116.14740799999998, 161.13173, 161.13173, 147.14004899999998, 148.31676099999999, 135.308921, 135.308921, 153.712379, 123.09196100000003, 140.539937, 140.539937, 135.71943199999998, 156.81712299999998, 140.639729, 138.14293199999997, 158.762049, 141.571751, 191.626715, 171.399657, 178.811037, 178.00498800000003, 238.532053, 205.26533899999998, 205.26533899999998, 37.26533899999998, 117.618955, 122.090945, 124.17773600000001, 132.353166, 171.288772, 165.733833, 172.879546, 179.014967, 179.014967, 241.71899200000001, 241.71899200000001, 243.186206, 240.798723, 236.262591, 236.262591, 240.108157, 126.988946, 126.988946, 131.919741, 124.616069, 123.320702, 123.735221, 123.669976, 124.732417, 125.956961, 120.063557, 127.407012, 125.607003, 125.180548, 124.248221, 126.950357, 123.982357, 122.95948, 122.95948, 126.049826, 126.049826, 126.234797, 128.1033, 124.281065, 124.281065, 124.547017, 125.499629, 124.784416, 122.165636, 124.595289, 124.595289, 125.594551, 124.982874, 125.199608, 124.738606, 127.095962, 124.184768, 124.278193, 126.922097, 126.922097, 198.832637, 198.832637, 193.992175, 192.560274, 192.266589, 192.70881300000002, 194.487168, 188.927367, 188.808483, 189.33831, 192.443757, 192.443757, 192.08561, 195.30486, 192.80263300000001, 192.138202, 194.10756700000002, 317.107567, 258.886526, 250.459142, 248.450901, 218.456075, 218.456075, 199.440882, 204.231758, 124.96587399999999, 138.805143, 146.14168, 139.915484, 124.05890499999998, 88.177592, 99.40578099999999, 99.40578099999999, 111.05046599999997, 54.709918000000016, 54.709918000000016, 200.70991800000002, 228.59991200000002, 189.77297600000003, 192.189726, 195.101698, 205.892878, 176.041247, 178.06117899999998, 180.69535100000002, 170.5602, 143.977278, 143.72488399999997, 144.87766800000003, 114.44112000000001, 117.219133, 141.07394499999998, 119.04964899999999, 119.25435900000002, 112.57071400000001, 137.45803999999998, 119.36594100000002, 117.47114499999998, 163.89730400000002, 146.438067, 147.52826900000002, 150.45302299999997, 186.08133099999998, 180.276699, 118.899741, 118.899741, 190.83147400000001, 133.713071, 126.121265, 134.01593400000002, 169.45462099999997, 140.750992, 140.829166, 140.829166, 164.343725, 181.169898, 166.28786300000002, 179.060041, 218.637155, 222.494765, 210.380759, 231.490461, 77.79296099999999, 77.79296099999999, 112.45264499999999, 121.416879, 162.231639, 175.013915, 162.398666, 161.618814, 188.898728, 226.704476, 231.042122, 227.00196599999998, 235.30746, 228.238791, 228.465196, 230.056163, 226.447957, 232.319116, 232.319116, 128.319116, 127.180487, 124.878845, 124.159079, 129.325547, 125.53449, 127.378479, 124.60447, 127.42002500000001, 126.082224, 122.242722, 123.248639, 126.46732800000001, 126.52827500000001, 123.289301, 120.23263, 119.475041, 120.861093, 122.667861, 124.668812, 124.020848, 122.753573, 123.232091, 123.383466, 123.094648, 118.741485, 124.860842, 120.280941, 127.62679800000001, 125.328716, 126.128658, 127.43437399999999, 127.701133, 125.786052, 123.501592, 126.805544, 126.805544, 200.805544, 202.430321, 197.852206, 201.858878, 201.858878, 199.00598300000001, 204.451653, 196.030948, 194.460416, 194.988441, 197.797369, 198.472555, 201.746069, 197.487735, 197.487735, 202.078478, 186.357284, 305.357284]
    
    cpu_usages = [0, 0, 61.743225, 65.812928, 64.688258, 61.283377, 61.283377, 67.654982, 68.506236, 68.069168, 63.33223, 67.350238, 67.350238, 59.135644, 59.135644, 65.063693, 65.367389, 64.644802, 64.644802, 63.671429, 67.479587, 60.369221, 63.746355, 68.426908, 68.426908, 67.848495, 68.379601, 65.033326, 66.127736, 66.072899, 64.005658, 65.626443, 65.626443, 66.947988, 64.115421, 65.943284, 68.052725, 66.706593, 64.079707, 66.359751, 66.652653, 70.252121, 62.923355, 67.126152, 63.567186, 63.522037, 65.607079, 65.990171, 62.548382, 61.127716, 62.720609, 64.266515, 65.87071, 65.87071, 65.245995, 57.512539, 59.729175, 64.033217, 63.277707, 63.300236, 65.711968, 63.283551, 64.754742, 64.754742, 68.782502, 63.018085, 63.018085, 63.563587, 71.889895, 64.555834, 62.135457, 61.660707, 62.18573, 62.18573, 67.263784, 71.418236, 137.838296, 124.973905, 144.046814, 188.035742, 186.621325, 198.083011, 247.179403, 244.414532, 290.002148, 290.002148, 295.501502, 340.193935, 337.603942, 337.603942, 337.75654, 342.075036, 340.059003, 357.540656, 333.370868, 378.765409, 384.203911, 376.488329, 417.234252, 419.647498, 399.808957, 420.418237, 417.371609, 415.687412, 395.31032, 409.665596, 414.328398, 367.193016, 380.588229, 355.168267, 351.698839, 331.657607, 338.393024, 338.393024, 323.316553, 323.316553, 335.339155, 303.564811, 304.098715, 250.799748, 250.799748, 252.688684, 228.040479, 195.5729, 181.70091, 135.338763, 135.338763, 107.944042, 107.944042, 66.244164, 61.989939, 66.483219, 65.621958, 64.934725, 66.901524, 66.69103, 64.781212, 67.526626, 67.774357, 65.041874, 70.976161, 69.392448, 67.182445, 68.313569, 65.735736, 69.748069, 69.879586, 68.653724, 63.957029, 63.507327, 68.12431, 66.650802, 65.715767, 60.000721, 67.136805, 63.062296, 64.018353, 62.040963, 62.040963, 63.679135, 62.154706, 65.181957, 64.068167, 62.955775, 63.776876, 64.813811, 67.133909, 63.064697, 63.378305, 64.617083, 65.588123, 63.81287, 67.709429, 65.932648, 69.467776, 68.323161, 66.588076, 64.669751, 63.069118, 67.945729, 67.22985, 66.832906, 66.23627, 65.847554, 65.495303, 65.495303, 66.514129, 67.329368, 65.083671, 61.357294, 62.94477, 62.212584, 68.336662, 67.07261, 64.864739, 64.958125, 69.507114, 66.610447, 68.525375, 65.489864, 68.253549, 65.888995, 70.468058, 75.914542, 68.394364, 69.441889, 65.384635, 67.455503, 67.455503, 68.250114, 65.357909, 65.483581, 65.483581, 71.977791, 72.614541, 72.614541, 67.588842, 63.59081, 68.024119, 63.750568, 120.006415, 141.780724, 157.363302, 194.491844, 191.004811, 214.548369, 258.842478, 247.114835, 312.71089, 301.050892, 290.10112, 329.702207, 324.740036, 327.989362, 341.644953, 345.155229, 339.429658, 349.754034, 343.547861, 381.285517, 370.047963, 370.047963, 404.025968, 406.407655, 395.729498, 410.945677, 408.927901, 388.462345, 411.756913, 413.74045, 379.053994, 377.120611, 374.794915, 342.678069, 350.37731, 351.175823, 330.527249, 339.084112, 314.821851, 345.557808, 335.729661, 306.96319, 294.292478, 279.71473, 263.332449, 263.332449, 252.101558, 197.453348, 193.687384, 151.860015, 136.625863, 138.461229, 68.300933, 65.568534, 59.355894, 66.259219, 70.144654, 69.622521, 66.224944, 66.347775, 67.625393, 71.684717, 69.288331, 67.552996, 66.877703, 65.358259, 64.09007, 65.972771, 46.733962, 46.733962, 59.836314, 67.122512, 67.122512, 69.136134, 69.565368, 66.371765, 68.182048, 66.810451, 64.643932, 60.62675, 68.080732, 66.749273, 64.798237, 64.798237, 64.878494, 63.181709, 65.372129, 64.0131, 65.70622, 69.175132, 66.861682, 64.719033, 67.670241, 64.220562, 68.25315, 67.834423, 68.560337, 69.022853, 69.313214, 65.118357, 67.406357, 63.376912, 65.045172, 64.989495, 63.718965, 63.345824, 65.449804, 64.155342, 62.886053, 66.267959, 65.485001, 65.855195, 69.179225, 66.506739, 66.506739, 65.672874, 65.700215, 62.53296, 68.086563, 66.499444, 62.409591, 62.711345, 62.659603, 62.659603, 60.395247, 66.284063, 65.326346, 67.663318, 66.458327, 67.466311, 70.133281, 65.957265, 66.595222, 67.34767, 63.437278, 63.25499, 67.629983, 66.231469, 67.961705, 68.507882, 67.745954, 67.745954, 67.248327, 62.504716, 94.801841, 137.00814, 145.935319, 190.619658, 194.037242, 233.892233, 233.892233, 254.712385, 261.488186, 298.071202, 282.161501, 329.107831, 317.119975, 312.571976, 341.597658, 340.412251, 341.760491, 355.978433, 354.902114, 363.21097, 381.047892, 371.724801, 414.718742, 411.074446, 399.373427, 409.639409, 410.727897, 393.188453, 410.719083, 415.898426, 392.934029, 377.301244, 379.155277, 379.155277, 349.539475, 335.751355, 335.751355, 340.206766, 344.070271, 315.490784, 315.490784, 292.290156, 304.459899, 302.161018, 255.155852, 255.155852, 203.190348, 187.090546, 193.63851, 146.449029, 133.040927, 133.040927, 63.658729, 65.872208, 65.872208, 63.785919, 65.557305, 66.257614, 66.257614, 64.719509, 69.977905, 63.764268, 72.086588, 72.086588, 79.028644, 72.453438, 72.453438, 71.439419, 65.766206, 67.981376, 69.559621, 66.739438, 72.002492, 64.164944, 64.655924, 64.272103, 64.272103, 62.007494, 62.007494, 66.338223, 71.645633, 71.645633, 63.56426, 64.926313, 66.310069, 64.223916, 70.085048, 68.419701, 71.077381, 71.36494, 64.996268, 70.869812, 72.071281, 70.278834, 66.573504, 64.79114, 67.027187, 62.453225, 62.453225, 64.880695, 62.802072, 65.361954, 63.988112, 68.05674, 68.05674, 67.980978, 69.14486, 67.490425, 71.864219, 63.439282, 64.259946, 66.794305, 65.083107, 63.974744, 64.744144, 66.039328, 63.075114, 64.599929, 69.433168, 67.252682, 69.62072, 68.596196, 65.898732, 65.898732, 64.297847, 66.054371, 67.160351, 66.757853, 66.550352, 65.17163, 65.384049, 71.176669, 68.427492, 68.479803, 67.810531, 67.852539, 69.594607, 69.594607, 70.910444, 68.897539, 70.113685, 70.113685, 62.509112, 65.087484, 133.947896, 133.947896, 132.924342, 165.104443, 188.169863, 214.01004, 257.470853, 240.649592, 308.856074, 309.477951, 290.347634, 322.716367, 333.424267, 333.424267, 345.628135, 340.405617, 342.477336, 352.506857, 345.058327, 383.199048, 384.811998, 384.811998, 417.381313, 417.381313, 378.148455, 411.174043, 409.55963, 409.55963, 390.938918, 407.548575, 392.441869, 382.398889, 382.757602, 335.682254, 335.682254, 355.582738, 349.104937, 339.425138, 311.241604, 325.765666, 336.398238, 336.398238, 277.215851, 297.545856, 254.817334, 254.882559, 244.950759, 187.152664, 182.643752, 135.005404, 135.005404, 137.099465, 93.870301, 67.082988, 65.723279, 64.320887, 69.562654, 74.428905, 65.510198, 65.510198, 62.158134, 65.298171, 67.352314, 65.257533, 64.268172, 64.268172, 64.564241, 62.156164, 62.156164, 66.038028, 64.117921, 64.117921, 65.074717, 68.808897, 61.544367, 61.544367, 63.719097, 66.237215, 67.173829, 61.888583, 66.855439, 69.535783, 71.224133, 67.677779, 65.835607, 67.041732, 63.31931, 62.19923, 62.33675, 63.082979, 67.750766, 67.750766, 65.903316, 65.559874, 66.629098, 66.887576, 63.563459, 67.011674, 61.641178, 65.090452, 67.282378, 67.282378, 62.226595, 71.180984, 63.285314, 63.569488, 62.547156, 67.443055, 62.172521, 62.172521, 68.00451, 66.581996, 66.23648, 66.102292, 67.380522, 67.380522, 68.871685, 68.871685, 64.193322, 66.494357, 60.046868, 60.046868, 64.822877, 64.009062, 67.008353, 65.557842, 65.797809, 65.164547, 61.930419, 68.302495, 68.302495, 62.909795, 70.484541, 64.651806, 64.789164, 69.860725, 65.664353, 66.606772, 67.59384, 68.336629, 69.146114, 64.815284, 67.871863, 69.952916, 121.959888, 136.68046, 139.548716, 197.362649, 197.362649, 182.25515, 254.721091, 246.582766, 246.582766, 295.386888, 295.060452, 327.11073, 327.11073, 316.816171, 349.175202, 328.152328, 352.463196, 349.979274, 342.156759, 382.986456, 383.414558, 375.817267, 409.974599, 411.372933, 410.578232, 414.90799, 418.508568, 398.545694, 411.562525, 411.407412, 411.788265, 364.112456, 364.112456, 339.263475, 351.129407, 323.364911, 337.980744, 333.326596, 333.326596, 335.167825, 330.241032, 280.122562, 287.321545, 297.07834, 279.535228, 254.74456, 254.374602, 179.04024, 188.421524, 189.60678, 189.60678, 134.465954, 105.120722, 64.622324, 64.037213, 60.449515, 67.349291, 66.888078, 66.888078, 65.276643, 65.22202, 66.109513, 63.836765, 64.270034, 65.032251, 71.107685, 71.107685, 63.12264]

    cpu_requests = [700, 700, 700, 700, 700, 700, 700, 700, 700, 700, 700, 700, 700, 700, 700, 700, 700, 700, 700, 700, 700, 700, 700, 700, 700, 700, 700, 700, 700, 700, 700, 700, 700, 700, 700, 700, 700, 700, 700, 700, 700, 700, 700, 700, 700, 700, 700, 700, 700, 700, 700, 700, 700, 700, 700, 700, 700, 700, 700, 700, 700, 700, 700, 700, 700, 700, 700, 700, 700, 700, 700, 700, 700, 700, 700, 700, 700, 700, 700, 700, 700, 700, 700, 700, 700, 700, 700, 700, 700, 700, 700, 700, 700, 700, 700, 700, 700, 700, 700, 700, 700, 700, 700, 700, 700, 700, 700, 700, 700, 700, 700, 700, 700, 700, 700, 700, 700, 700, 700, 700, 700, 700, 700, 700, 700, 700, 700, 700, 700, 700, 700, 700, 700, 700, 700, 700, 700, 700, 700, 700, 700, 700, 700, 700, 700, 700, 700, 700, 700, 700, 700, 700, 700, 700, 700, 700, 700, 700, 700, 700, 700, 700, 700, 700, 700, 700, 700, 700, 700, 700, 700, 700, 700, 700, 700, 700, 700, 700, 700, 700, 700, 700, 700, 700, 700, 700, 700, 700, 700, 700, 700, 700, 700, 700, 700, 700, 700, 700, 700, 700, 700, 700, 700, 700, 700, 700, 700, 700, 700, 700, 700, 700, 700, 700, 700, 700, 700, 700, 700, 700, 700, 700, 700, 700, 700, 700, 700, 700, 700, 700, 700, 700, 700, 700, 700, 700, 700, 700, 700, 700, 700, 700, 700, 700, 700, 700, 700, 700, 700, 700, 700, 700, 700, 700, 700, 700, 700, 700, 700, 700, 700, 700, 700, 700, 700, 700, 700, 700, 700, 700, 700, 700, 700, 700, 700, 700, 700, 700, 700, 700, 700, 700, 700, 700, 700, 700, 700, 700, 189, 189, 189, 189, 189, 189, 189, 189, 189, 189, 189, 189, 189, 189, 189, 189, 189, 189, 189, 189, 189, 189, 189, 189, 189, 189, 189, 189, 189, 189, 189, 189, 189, 189, 189, 189, 189, 189, 189, 189, 189, 189, 189, 189, 189, 189, 189, 189, 189, 189, 189, 189, 189, 189, 189, 253, 253, 253, 253, 253, 253, 253, 253, 253, 253, 253, 253, 253, 253, 253, 253, 253, 253, 484, 484, 484, 484, 484, 484, 484, 484, 484, 484, 484, 484, 484, 484, 484, 484, 484, 484, 484, 484, 484, 484, 484, 484, 484, 484, 484, 484, 484, 484, 484, 484, 484, 484, 484, 484, 484, 484, 484, 484, 484, 484, 484, 424, 424, 424, 424, 424, 424, 424, 424, 424, 424, 424, 424, 424, 424, 424, 424, 424, 424, 188, 188, 188, 188, 188, 188, 188, 188, 188, 188, 188, 188, 188, 188, 188, 188, 188, 188, 188, 188, 188, 188, 188, 188, 188, 188, 188, 188, 188, 188, 188, 188, 188, 188, 188, 188, 188, 188, 188, 188, 188, 188, 188, 188, 188, 188, 188, 188, 188, 188, 188, 188, 188, 188, 188, 188, 188, 188, 188, 188, 188, 188, 188, 188, 188, 247, 247, 247, 247, 247, 247, 247, 247, 247, 247, 247, 247, 247, 247, 247, 247, 247, 247, 485, 485, 485, 485, 485, 485, 485, 485, 485, 485, 485, 485, 485, 485, 485, 485, 485, 485, 485, 485, 485, 485, 485, 485, 485, 485, 536, 536, 536, 536, 536, 536, 536, 536, 536, 536, 536, 536, 536, 536, 536, 536, 536, 536, 409, 409, 409, 409, 409, 409, 409, 409, 409, 409, 409, 409, 409, 409, 409, 409, 409, 409, 190, 190, 190, 190, 190, 190, 190, 190, 190, 190, 190, 190, 190, 190, 190, 190, 190, 190, 190, 190, 190, 190, 190, 190, 190, 190, 190, 190, 190, 190, 190, 190, 190, 190, 190, 190, 190, 190, 190, 190, 190, 190, 190, 190, 190, 190, 190, 190, 190, 190, 190, 190, 190, 190, 190, 190, 190, 190, 190, 190, 190, 190, 190, 190, 190, 190, 190, 190, 190, 190, 190, 390, 390, 390, 390, 390, 390, 390, 390, 390, 390, 390, 390, 390, 390, 390, 390, 390, 390, 533, 533, 533, 533, 533, 533, 533, 533, 533, 533, 533, 533, 533, 533, 533, 533, 533, 533, 533, 533, 533, 533, 533, 533, 533, 533, 533, 533, 470, 470, 470, 470, 470, 470, 470, 470, 470, 470, 470, 470, 470, 470, 470, 470, 470, 470, 227, 227, 227, 227, 227, 227, 227, 227, 227, 227, 227, 227, 227, 227, 227, 227, 227, 227]


    cpu_usages2 = [0, 56.383222, 64.956819, 74.511054, 137.092105, 144.490632, 135.664184, 191.46086, 193.901668, 231.137622, 254.015658, 257.865274, 257.865274, 292.459281, 308.438162, 334.448989, 350.268369, 316.436642, 337.63748, 326.069912, 326.069912, 347.985385, 350.405846, 374.867632, 374.867632, 401.093578, 404.914935, 389.359708, 400.051693, 401.909594, 408.424633, 408.424633, 387.5732, 403.170383, 379.174711, 376.445244, 373.285204, 349.678897, 351.057496, 328.856445, 338.281372, 336.398735, 322.253146, 327.528024, 321.121557, 306.020918, 305.964783, 292.50045, 263.419859, 263.419859, 193.52459, 188.577358, 194.817514, 140.202515, 136.588266, 139.040622, 83.606168, 68.522077, 65.169742, 69.657027, 69.386602, 69.386602, 65.637872, 67.053758, 66.783656, 68.000242, 65.904767, 68.136969, 66.78044, 67.538351, 69.116381, 66.934356, 72.1687, 69.800479, 67.436403, 67.48608, 67.48608, 69.39241, 66.07788, 68.939634, 66.72333, 67.076674, 67.342869, 70.132456, 67.692827, 67.692827, 68.796467, 62.746049, 63.077078, 65.578514, 65.784275, 64.06972, 69.135028, 66.289714, 63.03415, 65.456886, 63.846081, 64.649757, 68.074699, 68.074699, 67.765493, 64.867269, 68.171587, 63.685002, 67.225631, 63.326328, 68.898277, 67.224461, 63.235752, 66.548302, 68.976773, 65.81827, 66.02423, 64.922527, 66.207772, 68.146729, 68.146729, 69.813872, 72.411748, 66.289293, 67.566671, 69.129082, 65.837947, 65.837947, 66.106472, 64.780006, 71.30697, 65.843414, 65.843414, 67.82024, 68.627559, 67.211805, 64.064805, 67.506278, 68.308985, 67.576534, 64.418038, 70.501597, 68.875575, 65.322449, 66.35341, 68.450842, 68.450842, 68.624278, 68.624278, 66.43181, 66.43181, 67.010819, 90.553244, 140.118802, 137.963402, 173.884587, 187.687369, 237.606474, 260.988916, 249.068926, 289.831193, 301.478977, 286.068991, 332.57716, 330.707269, 316.272557, 340.31749, 329.343071, 346.102866, 346.127074, 335.94874, 375.795281, 375.795281, 368.063001, 406.516139, 404.409192, 384.869114, 402.967267, 406.723255, 406.723255, 389.345584, 403.754244, 402.927221, 357.469571, 370.866678, 347.400352, 347.400352, 345.606059, 330.352303, 337.559347, 327.610647, 339.992017, 339.992017, 319.010257, 299.659498, 305.589023, 259.337236, 258.338037, 245.234324, 187.753289, 189.610383, 164.360193, 134.079564, 127.996954, 64.613255, 67.41163, 71.345325, 64.107849, 71.106749, 67.188524, 68.051222, 68.118773, 71.866113, 67.025597, 67.732048, 69.484032, 71.147695, 68.382098, 65.873846, 70.144203, 69.844878, 68.929947, 69.309277, 71.184663, 74.302781, 65.786308, 60.917791, 66.163269, 70.628926, 66.728942, 67.091833, 66.065228, 68.313131, 65.383748, 69.699375, 65.567956, 69.436807, 62.835375, 65.611811, 66.338474, 66.24859, 65.699575, 59.968479, 63.039737, 67.064284, 64.926206, 62.336839, 64.394692, 64.21316, 62.685151, 64.345965, 64.421969, 65.737258, 66.930372, 61.395794, 63.5185, 63.5185, 66.636257, 66.636257, 69.158113, 65.704968, 65.704968, 65.849538, 65.849538, 68.056485, 66.774907, 65.136015, 65.136015, 67.980634, 65.487293, 65.938022, 66.033652, 64.368364, 64.368364, 66.007691, 71.022942, 63.497061, 66.375547, 63.079109, 66.740437, 66.600454, 66.600454, 68.537764, 63.830106, 64.20714, 67.15505, 67.15505, 66.631135, 67.110697, 70.808845, 69.109578, 61.931167, 61.931167, 70.023903, 63.721167, 68.180703, 141.229463, 144.453571, 144.823086, 144.823086, 195.968679, 228.385598, 228.385598, 244.739579, 266.260714, 300.75671, 295.806977, 331.584031, 329.498867, 321.615446, 321.615446, 316.903002, 348.715567, 347.453612, 348.501109, 352.649185, 379.188884, 365.165308, 404.746974, 404.746974, 403.293525, 402.035184, 402.931485, 405.025627, 405.894751, 404.912104, 377.067094, 379.755562, 379.755562, 337.788155, 351.323373, 349.073786, 323.568291, 339.404602, 308.865899, 333.326221, 330.79993, 280.883912, 295.030471, 271.313737, 245.797608, 258.545489, 220.12455, 185.138841, 192.200091, 142.341616, 135.572836, 137.202105, 65.169855, 65.169855, 65.241722, 63.806257, 64.62442, 65.533144, 68.454161, 72.684024, 69.406512, 70.697171, 69.368867, 69.368867, 69.506791, 64.930296, 68.935391, 67.163677, 67.163677, 67.724065, 66.871461, 68.585443, 67.57764, 67.381861, 64.488068, 68.251985, 68.603133, 69.065199, 65.411262, 66.739369, 66.782394, 68.019753, 65.790356, 65.482162, 63.755582, 67.316169, 62.983441, 67.10277, 67.442412, 64.542605, 69.042731, 68.308548, 68.308548, 68.743627, 66.30981, 67.025797, 67.736266, 65.227058, 68.101161, 64.540875, 65.838035, 66.632284, 69.461638, 62.972202, 67.768112, 62.061558, 63.351223, 64.216604, 65.59268, 61.942893, 63.542876, 63.330674, 64.108028, 63.965978, 65.945367, 63.826879, 63.826879, 65.983497, 66.282057, 68.86628, 64.823645, 66.849533, 70.872343, 70.872343, 66.636433, 65.650549, 67.226528, 66.610296, 70.402445, 66.493134, 68.990648, 68.990648, 69.74935, 67.765821, 68.843192, 71.825005, 71.825005, 70.599926, 70.644931, 68.44815, 68.508757, 63.550971, 66.529393, 70.843852, 111.456694, 143.384279, 142.708064, 193.150059, 193.150059, 189.990239, 251.753541, 253.233204, 283.625349, 302.369251, 294.738385, 309.002527, 344.917951, 314.368718, 336.491029, 341.425057, 334.867211, 356.035353, 334.170298, 381.069156, 381.069156, 367.34812, 405.100939, 407.893883, 388.089008, 408.964669, 408.506975, 408.767754, 389.481776, 408.678538, 408.678538, 377.409433, 377.409433, 341.203166, 345.826703, 347.037413, 315.145689, 342.985109, 339.310093, 319.810004, 330.023215, 300.252839, 292.562454, 296.666542, 254.846791, 259.544868, 240.437667, 189.435885, 186.954192, 149.15364, 126.776602, 122.196621, 69.954554, 63.298136, 63.118263, 63.180265, 63.063254, 65.458693, 64.91563, 67.284061, 64.430942, 65.301521, 65.886171, 67.386719, 67.371396, 69.106079, 66.991808, 63.501383, 69.261273, 67.165266, 61.937959, 74.148124, 68.044437, 67.166079, 69.689115, 66.808585, 68.80745, 67.336739, 67.785965, 67.785965, 65.435313, 71.521264, 66.89139, 66.094265, 62.727683, 62.727683, 67.041838, 63.632348, 63.784161, 69.343725, 67.096184, 68.258065, 68.509551, 67.874483, 68.216374, 65.290121, 64.914439, 66.290155, 65.590451, 65.206128, 65.206128, 66.663659, 65.704936, 68.244265, 65.891208, 70.512753, 63.416685, 64.533169, 69.763094, 64.694162, 68.481162, 62.73894, 62.73894, 66.181798, 65.944076, 61.817738, 67.846639, 60.854451, 64.66163, 66.766932, 65.34576, 69.346818, 70.475162, 64.521862, 64.521862, 67.301458, 65.272155, 65.930255, 68.554935, 70.937084, 58.167621, 58.167621, 66.410461, 66.410461, 65.969397, 67.064354, 67.064354, 67.103822, 69.59259, 69.59259, 66.552973, 63.766226, 66.428246, 64.957248, 120.195843, 120.195843, 142.535417, 142.535417, 142.535417, 174.007965, 252.542621, 253.943097, 260.923522, 303.538166, 283.149185, 345.507535, 341.841084, 337.438018, 342.620071, 344.887717, 328.542436, 344.393978, 334.983622, 377.688819, 378.340876, 378.340876, 385.083542, 402.058055, 388.264239, 404.746409, 407.458463, 403.109068, 386.050984, 401.238096, 385.588854, 374.197458, 374.197458, 324.859425, 350.855274, 350.855274, 334.874073, 338.921802, 341.852364, 327.976028, 333.159323, 303.226318, 297.971776, 308.966387, 245.91204, 255.433008, 255.433008, 184.31879, 188.229308, 157.12398, 157.12398, 125.809161, 70.458655, 74.408948, 67.070023, 67.111991, 63.323102, 63.996919, 64.901998, 64.901998, 69.872097, 65.263454, 70.646789, 70.281037, 70.770037, 65.922058, 73.340971, 67.302576, 68.272177, 69.481168, 71.39055, 69.284053, 68.669524, 67.196572, 69.511, 67.155025, 66.161561, 70.918664, 66.87883, 66.87883, 59.852072, 59.852072, 68.923268, 63.323426, 65.148449, 63.645174, 67.03236, 65.252496, 65.252496, 63.346677, 59.164913, 64.989345, 64.686928, 65.625622, 66.400409, 67.74685, 60.933982, 69.319422, 68.289387, 66.225405, 68.525799, 66.983458, 62.756596, 64.847471, 61.190449, 70.378769, 67.196653, 65.120607, 64.465952, 62.597857, 66.619529, 64.303229, 63.825769, 60.877521, 64.113564, 65.727067, 67.589511, 65.948535, 67.377545, 67.377545, 67.871688, 66.229078, 65.617415, 66.368269, 69.999964, 69.251218, 69.39869, 68.617272, 68.038928, 67.285648, 67.285648, 62.062307, 68.633919, 65.148513, 64.992567, 68.788832, 68.651884, 69.843028, 69.825103, 63.923937]

    cpu_requests2 = [700, 700, 700, 700, 700, 700, 700, 700, 700, 700, 700, 700, 700, 700, 700, 700, 700, 700, 700, 700, 700, 700, 700, 700, 700, 700, 700, 700, 700, 700, 700, 700, 700, 700, 700, 700, 700, 700, 700, 700, 700, 700, 700, 700, 700, 700, 700, 700, 700, 700, 700, 700, 700, 700, 700, 700, 700, 700, 700, 700, 700, 700, 700, 700, 700, 700, 700, 700, 700, 700, 700, 700, 700, 700, 700, 700, 700, 700, 700, 700, 700, 700, 700, 700, 700, 700, 700, 700, 700, 700, 700, 700, 700, 700, 700, 700, 700, 700, 700, 700, 700, 700, 700, 700, 700, 700, 700, 700, 700, 700, 700, 700, 700, 700, 700, 700, 700, 700, 700, 700, 700, 700, 700, 700, 700, 700, 700, 700, 700, 700, 700, 700, 700, 700, 700, 700, 700, 700, 700, 700, 700, 700, 700, 700, 700, 700, 700, 700, 700, 700, 700, 700, 700, 700, 700, 700, 700, 700, 700, 700, 700, 700, 700, 700, 700, 700, 700, 700, 700, 700, 700, 700, 700, 700, 700, 700, 700, 700, 700, 700, 700, 700, 700, 700, 700, 700, 700, 700, 700, 700, 700, 700, 700, 700, 700, 700, 700, 700, 700, 700, 700, 700, 700, 700, 700, 700, 700, 700, 700, 700, 700, 700, 700, 700, 700, 700, 700, 700, 700, 700, 700, 700, 700, 700, 700, 700, 700, 700, 700, 700, 700, 700, 700, 700, 700, 700, 700, 700, 700, 700, 700, 700, 700, 700, 700, 700, 700, 700, 700, 700, 700, 700, 700, 700, 700, 700, 700, 700, 700, 700, 700, 700, 700, 700, 700, 700, 700, 700, 700, 700, 700, 700, 700, 700, 700, 700, 700, 700, 700, 700, 700, 700, 700, 700, 700, 700, 700, 700, 465, 465, 465, 465, 465, 465, 465, 465, 465, 465, 465, 465, 465, 465, 465, 465, 465, 465, 524, 524, 524, 524, 524, 524, 524, 524, 524, 524, 524, 524, 524, 524, 524, 524, 524, 524, 468, 468, 468, 468, 468, 468, 468, 468, 468, 468, 468, 468, 468, 468, 468, 468, 468, 468, 222, 222, 222, 222, 222, 222, 222, 222, 222, 222, 222, 222, 222, 222, 222, 222, 222, 222, 222, 222, 222, 222, 222, 222, 222, 222, 222, 222, 222, 222, 222, 222, 222, 222, 222, 222, 222, 222, 222, 222, 222, 222, 222, 222, 222, 222, 222, 222, 222, 222, 222, 222, 222, 222, 222, 222, 222, 222, 222, 222, 222, 222, 222, 222, 222, 222, 222, 222, 222, 222, 222, 222, 222, 222, 222, 222, 222, 222, 222, 222, 379, 379, 379, 379, 379, 379, 379, 379, 379, 379, 379, 379, 379, 379, 379, 379, 379, 379, 523, 523, 523, 523, 523, 523, 523, 523, 523, 523, 523, 523, 523, 523, 523, 523, 523, 523, 523, 523, 523, 523, 523, 523, 523, 523, 523, 523, 467, 467, 467, 467, 467, 467, 467, 467, 467, 467, 467, 467, 467, 467, 467, 467, 467, 467, 222, 222, 222, 222, 222, 222, 222, 222, 222, 222, 222, 222, 222, 222, 222, 222, 222, 222, 222, 222, 222, 222, 222, 222, 222, 222, 222, 222, 222, 222, 222, 222, 222, 222, 222, 222, 222, 222, 222, 222, 222, 222, 222, 222, 222, 222, 222, 222, 222, 222, 222, 222, 222, 222, 222, 222, 222, 222, 222, 222, 222, 222, 222, 222, 222, 222, 222, 222, 222, 222, 222, 222, 222, 222, 222, 222, 222, 222, 222, 222, 382, 382, 382, 382, 382, 382, 382, 382, 382, 382, 382, 382, 382, 382, 382, 382, 382, 382, 523, 523, 523, 523, 523, 523, 523, 523, 523, 523, 523, 523, 523, 523, 523, 523, 523, 523, 523, 523, 523, 523, 523, 523, 523, 523, 523, 523, 465, 465, 465, 465, 465, 465, 465, 465, 465, 465, 465, 465, 465, 465, 465, 465, 465, 465, 220, 220, 220, 220, 220, 220, 220, 220, 220, 220, 220, 220, 220, 220, 220, 220, 220, 220, 220, 220, 220, 220, 220, 220, 220, 220, 220, 220, 220, 220, 220, 220, 220, 220, 220, 220, 220, 220, 220, 220, 220, 220, 220, 220, 220, 220, 220, 220, 220, 220, 220, 220, 220, 220, 220, 220, 220, 220, 220, 220, 220, 220, 220, 220, 220, 220, 220, 220, 220, 220, 220, 220, 220, 220, 220, 220, 220, 220, 220, 220, 381, 381, 381, 381, 381, 381, 381, 381, 381, 381]
    
    cpu_requests2 = [x-50 for x in cpu_requests2]
    cpu_requests = [x-50 for x in cpu_requests]

    vpa_slacks = [363.266038, 363.266038, 350.163686, 342.87748799999997, 342.87748799999997, 340.86386600000003, 340.43463199999997, 343.628235, 341.817952, 343.189549, 345.356068, 349.37325, 341.919268, 343.250727, 345.201763, 345.201763, 345.121506, 346.818291, 344.627871, 345.9869, 344.29377999999997, 340.824868, 343.138318, 345.28096700000003, 342.32975899999997, 345.779438, 341.74685, 342.165577, 341.439663, 340.977147, 340.686786, 344.881643, 342.593643, 346.623088, 344.954828, 345.01050499999997, 346.281035, 346.654176, 344.550196, 345.844658, 347.113947, 343.732041, 344.514999, 344.144805, 340.820775, 343.493261, 343.493261, 344.327126, 344.299785, 347.46704, 341.913437, 343.500556, 347.590409, 347.288655, 347.340397, 347.340397, 349.604753, 343.715937, 344.673654, 342.336682, 343.541673, 342.533689, 339.866719, 344.042735, 343.40477799999996, 342.65233, 346.562722, 346.74501, 342.370017, 343.768531, 342.038295, 341.492118, 342.254046, 342.254046, 342.751673, 347.49528399999997, 315.19815900000003, 272.99186, 264.064681, 219.380342, 215.962758, 176.107767, 176.107767, 155.287615, 148.51181400000002, 111.92879799999997, 127.83849900000001, 80.89216900000002, 92.88002499999999, 97.428024, 68.40234199999998, 69.58774899999997, 68.239509, 54.021567000000005, 55.09788600000002, 46.789030000000025, 28.95210800000001, 38.275198999999986, -4.71874200000002, -1.074446000000023, 10.626573000000008, 0.36059099999999944, -0.7278969999999845, 16.81154700000002, -0.7190830000000119, -5.898425999999972, 49.06597099999999, 64.698756, 62.84472299999999, 62.84472299999999, 92.46052500000002, 106.24864500000001, 106.24864500000001, 101.79323399999998, 97.92972900000001, 126.50921599999998, 126.50921599999998, 149.70984399999998, 137.540101, 139.838982, 186.844148, 186.844148, 238.809652, 254.909454, 248.36149, 295.550971, 308.959073, 308.959073, 378.341271, 376.127792, 376.127792, 378.214081, 376.442695, 375.742386, 375.742386, 377.280491, 372.022095, 378.235732, 369.913412, 369.913412, 362.971356, 369.546562, 369.546562, 370.560581, 376.233794, 374.018624, 372.440379, 375.260562, 369.997508, 377.835056, 377.344076, 377.727897, 377.727897, 379.992506, 379.992506, 375.66177700000003, 370.354367, 370.354367, 378.43574, 377.073687, 375.689931, 377.77608399999997, 371.91495199999997, 373.58029899999997, 370.922619, 370.63506, 377.003732, 371.130188, 369.928719, 371.721166, 375.426496, 377.20886, 374.972813, 379.546775, 347.546775, 345.119305, 347.197928, 344.63804600000003, 346.011888, 341.94326, 341.94326, 342.019022, 340.85514, 342.509575, 338.135781, 346.560718, 345.740054, 343.205695, 344.916893, 346.025256, 345.255856, 343.960672, 346.924886, 345.400071, 340.566832, 342.747318, 340.37928, 341.403804, 344.101268, 344.101268, 345.702153, 343.945629, 342.839649, 343.242147, 343.449648, 344.82837, 344.615951, 338.823331, 341.57250799999997, 341.520197, 342.18946900000003, 342.147461, 340.405393, 340.405393, 339.089556, 341.102461, 339.88631499999997, 339.88631499999997, 347.490888, 344.912516, 276.052104, 276.052104, 277.075658, 244.895557, 221.830137, 195.98996, 152.52914700000002, 169.350408, 101.14392600000002, 100.52204899999998, 119.65236599999997, 87.28363300000001, 76.57573300000001, 76.57573300000001, 64.37186500000001, 69.594383, 67.52266400000002, 57.493142999999975, 64.94167299999998, 26.800951999999995, 25.188001999999983, 25.188001999999983, -7.381312999999977, -7.381312999999977, 31.851544999999987, -1.1740429999999833, 32.44036999999997, 32.44036999999997, 51.061082, 34.45142499999997, 49.558131, 59.601111, 59.24239799999998, 106.317746, 106.317746, 86.417262, 92.895063, 102.574862, 130.758396, 116.23433399999999, 105.60176200000001, 105.60176200000001, 164.784149, 144.45414399999999, 187.182666, 187.117441, 197.049241, 254.847336, 259.356248, 306.994596, 306.994596, 304.900535, 348.129699, 374.917012, 376.276721, 377.67911300000003, 372.437346, 367.571095, 376.489802, 376.489802, 379.841866, 376.701829, 374.647686, 376.74246700000003, 377.731828, 377.731828, 377.435759, 379.843836, 379.843836, 375.961972, 377.882079, 377.882079, 376.925283, 373.191103, 380.455633, 380.455633, 378.280903, 375.762785, 374.826171, 380.111417, 375.144561, 372.464217, 370.775867, 374.322221, 376.164393, 374.958268, 346.68069, 347.80077, 347.66325, 346.917021, 342.249234, 342.249234, 344.096684, 344.440126, 343.370902, 343.11242400000003, 346.436541, 342.98832600000003, 348.35882200000003, 344.909548, 342.717622, 342.717622, 347.773405, 338.81901600000003, 346.71468600000003, 346.430512, 347.452844, 342.556945, 347.827479, 347.827479, 341.99549, 343.418004, 343.76351999999997, 343.89770799999997, 342.619478, 342.619478, 341.128315, 341.128315, 345.80667800000003, 343.505643, 349.953132, 349.953132, 345.177123, 345.990938, 342.991647, 344.442158, 344.20219099999997, 344.83545300000003, 348.06958099999997, 341.697505, 341.697505, 347.09020499999997, 339.515459, 345.34819400000003, 345.210836, 340.139275, 344.335647, 343.393228, 342.40616, 341.663371, 340.853886, 345.184716, 342.128137, 340.047084, 288.040112, 273.31953999999996, 270.451284, 212.637351, 212.637351, 227.74485, 155.278909, 163.417234, 163.417234, 114.613112, 114.939548, 82.88927000000001, 82.88927000000001, 93.183829, 60.82479799999999, 81.84767199999999, 57.53680400000002, 60.020726000000025, 67.84324099999998, 27.013544000000024, 26.585442, 34.182732999999985, 0.025400999999988016, -1.372932999999989, -0.5782320000000141, -4.907989999999984, 23.491431999999975, 43.454305999999974, 30.437475000000006, 30.592587999999978, 30.211734999999976, 77.88754399999999, 77.88754399999999, 102.73652499999997, 90.87059299999999, 118.635089, 104.01925599999998, 108.673404, 108.673404, 106.832175, 111.75896799999998, 161.87743799999998, 154.67845499999999, 144.92165999999997, 162.46477199999998, 187.25544, 187.625398, 262.95975999999996, 253.578476, 252.39322, 252.39322, 307.534046, 336.879278, 377.377676, 377.962787, 381.550485, 374.650709, 375.111922, 375.111922, 376.72335699999996, 376.77798, 375.890487, 378.163235, 377.729966, 376.967749, 370.892315, 370.892315, 378.87736]
    vpa_slacks2 = [348.068833, 339.976097, 346.278833, 341.819297, 268.770537, 265.546429, 265.176914, 265.176914, 214.031321, 181.614402, 181.614402, 165.260421, 143.739286, 109.24329, 114.19302299999998, 78.41596900000002, 80.50113299999998, 88.38455399999998, 88.38455399999998, 93.09699799999999, 61.28443299999998, 62.54638799999998, 61.498891000000015, 57.35081500000001, 30.811116000000027, 44.83469200000002, 5.253025999999977, 5.253025999999977, 6.706475000000012, 7.964815999999985, 7.068514999999991, 4.974373000000014, 4.105249000000015, 5.087896000000001, 64.932906, 62.244438, 62.244438, 104.21184499999998, 90.676627, 92.92621400000002, 118.43170900000001, 102.59539799999999, 133.134101, 108.67377900000002, 111.20006999999998, 161.116088, 146.96952900000002, 170.686263, 196.202392, 183.45451100000002, 221.87545, 256.861159, 249.799909, 299.658384, 306.427164, 304.79789500000004, 376.830145, 376.830145, 376.758278, 378.193743, 377.37558, 376.466856, 373.545839, 369.315976, 372.593488, 371.302829, 340.631133, 340.631133, 340.493209, 345.069704, 341.064609, 342.836323, 342.836323, 342.275935, 343.128539, 341.414557, 342.42236, 342.618139, 345.511932, 341.748015, 341.396867, 340.934801, 344.58873800000003, 343.260631, 343.217606, 341.980247, 344.209644, 344.517838, 346.244418, 342.683831, 347.01655900000003, 342.89723, 342.557588, 345.457395, 340.957269, 341.691452, 341.691452, 341.256373, 343.69019000000003, 342.974203, 342.263734, 344.772942, 341.898839, 345.459125, 344.161965, 343.367716, 340.538362, 347.027798, 342.231888, 347.938442, 346.648777, 345.783396, 344.40732, 348.057107, 346.457124, 346.669326, 345.891972, 346.034022, 344.05463299999997, 346.173121, 346.173121, 344.016503, 343.717943, 341.13372, 345.176355, 343.150467, 339.127657, 339.127657, 343.363567, 344.349451, 342.77347199999997, 343.389704, 339.597555, 343.506866, 341.00935200000004, 341.00935200000004, 340.25065, 342.234179, 341.156808, 338.17499499999997, 338.17499499999997, 339.400074, 339.355069, 341.55185, 341.491243, 346.449029, 343.470607, 339.15614800000003, 298.54330600000003, 266.615721, 267.29193599999996, 216.849941, 216.849941, 220.009761, 158.246459, 156.766796, 126.37465099999997, 107.63074899999998, 115.261615, 100.99747300000001, 65.08204899999998, 95.631282, 73.50897099999997, 68.57494300000002, 75.132789, 53.964647000000014, 75.829702, 28.93084399999998, 28.93084399999998, 42.651880000000006, 4.899061000000017, 2.1061169999999834, 21.91099200000002, 1.0353309999999851, 1.4930249999999887, 1.232245999999975, 20.518223999999975, 1.3214619999999968, 33.321462, 64.59056700000002, 64.59056700000002, 100.79683399999999, 96.17329699999999, 94.96258699999998, 126.854311, 99.01489099999998, 102.689907, 122.18999600000001, 111.976785, 141.747161, 149.437546, 145.333458, 187.153209, 182.455132, 201.562333, 252.564115, 255.045808, 292.84636, 315.223398, 319.803379, 372.04544599999997, 378.701864, 378.881737, 378.819735, 378.93674599999997, 376.541307, 377.08437000000004, 374.715939, 377.569058, 376.698479, 376.113829, 374.61328100000003, 374.628604, 372.893921, 343.008192, 346.498617, 340.738727, 342.834734, 348.062041, 335.851876, 341.955563, 342.83392100000003, 340.310885, 343.191415, 341.19255, 342.66326100000003, 342.21403499999997, 342.21403499999997, 344.564687, 338.478736, 343.10861, 343.905735, 347.272317, 347.272317, 342.958162, 346.367652, 346.215839, 340.656275, 342.903816, 341.741935, 341.490449, 342.125517, 341.783626, 344.709879, 345.085561, 343.709845, 344.40954899999997, 344.79387199999996, 344.79387199999996, 343.336341, 344.295064, 341.755735, 344.108792, 339.487247, 346.58331499999997, 345.466831, 340.236906, 345.305838, 341.518838, 347.26106, 347.26106, 343.818202, 344.055924, 348.182262, 342.153361, 349.145549, 345.33837, 343.233068, 344.65424, 340.653182, 339.524838, 345.478138, 345.478138, 342.698542, 344.727845, 344.069745, 341.445065, 339.062916, 351.832379, 351.832379, 343.589539, 343.589539, 344.030603, 342.935646, 342.935646, 342.896178, 340.40741, 340.40741, 343.447027, 346.233774, 343.571754, 345.042752, 289.80415700000003, 289.80415700000003, 267.464583, 267.464583, 267.464583, 235.992035, 157.457379, 156.056903, 149.076478, 106.46183400000001, 126.85081500000001, 64.49246499999998, 68.15891599999998, 72.561982, 67.379929, 65.11228299999999, 81.45756399999999, 65.606022, 75.01637799999997, 32.311180999999976, 31.65912400000002, 31.65912400000002, 24.916457999999977, 7.941944999999976, 21.735761000000025, 5.253590999999972, 2.5415370000000053, 6.890932000000021, 23.949015999999972, 8.761904000000015, 56.411145999999974, 67.80254200000002, 67.80254200000002, 117.14057500000001, 91.14472599999999, 91.14472599999999, 107.12592699999999, 103.07819799999999, 100.14763599999998, 114.02397200000001, 108.84067700000003, 138.773682, 144.02822400000002, 133.033613, 196.08796, 186.566992, 186.566992, 257.68120999999996, 253.770692, 284.87602000000004, 284.87602000000004, 316.190839, 371.541345, 367.591052, 374.929977, 374.888009, 378.676898, 378.003081, 377.098002, 377.098002, 372.127903, 376.736546, 371.353211, 371.71896300000003, 371.229963, 376.077942, 336.65902900000003, 342.697424, 341.727823, 340.518832, 338.60945, 340.715947, 341.330476, 342.803428, 340.48900000000003, 342.844975, 343.838439, 339.08133599999996, 343.12117, 343.12117, 350.147928, 350.147928, 341.076732, 346.676574, 344.851551, 346.354826, 342.96764, 344.747504, 344.747504, 346.653323, 350.835087, 345.010655, 345.31307200000003, 344.374378, 343.59959100000003, 342.25315, 349.066018, 340.68057799999997, 341.71061299999997, 343.774595, 341.474201, 343.016542, 347.243404, 345.152529, 348.809551, 339.62123099999997, 342.80334700000003, 344.879393, 345.534048, 347.402143, 343.380471, 345.696771, 346.174231, 349.122479, 345.886436, 344.27293299999997, 342.410489, 344.051465, 342.622455, 342.622455, 342.128312, 343.770922, 344.382585, 343.631731, 340.000036, 340.748782, 340.60131, 341.382728, 341.961072, 342.714352, 342.714352, 347.937693, 341.366081, 344.851487, 345.007433, 341.211168, 341.348116, 340.156972, 340.174897, 346.076063]

   
    vpa = [sum(x) for x in zip(vpa_slacks, cpu_usages[288:])]
    vpa2 = [sum(x) for x in zip(vpa_slacks2, cpu_usages2[288:])]

    vpa_targets = [sum(x) for x in zip(vpa, vpa2)]
    vpa_x = range(len(vpa_targets))
    vpa_x = [x+288 for x in vpa_x]

    cpu_usages_total = [sum(x) for x in zip(cpu_usages, cpu_usages2)]
    cpu_requests_total = [sum(x) for x in zip(cpu_requests, cpu_requests2)]

    cpu_x = range(len(cpu_usages))
    cpu_x2 = range(len(cpu_usages2))


    # cpu_usages = cpu_usages[:288]
    # cpu_usages = cpu_usages 
    # print(len(cpu_usages))
    # cpu_requests = [700]*len(cpu_usages)
    # cpu_x = range(len(cpu_usages))

    # pred_targets = [np.nan]*len(cpu_usages)
    # pred_lowers = [np.nan]*len(cpu_usages)
    # pred_uppers = [np.nan]*len(cpu_usages)
    # pred_x = range(len(cpu_usages))
    
    # vpa_targets = [np.nan]*len(cpu_usages)
    # vpa_lowers = [np.nan]*len(cpu_usages)
    # vpa_uppers = [np.nan]*len(cpu_usages)
    # vpa_x = range(len(cpu_usages))
    #--------------------------------------------------------------------

# Plot setups ------------------------------------------
    # Set plot title, legend, labels
    fig1.suptitle('nginx pod metrics', fontsize=23)
    fig1.subplots_adjust(left=0.1, bottom=0.2, right=None, top=None, wspace=None, hspace=None)

    #fig2.suptitle('Slack', fontsize=23)
    fig2.subplots_adjust(left=0.1, bottom=0.2, right=None, top=None, wspace=None, hspace=None)

    # Plot settings
    
    ax1.tick_params(axis="x", labelsize=20) 
    ax1.tick_params(axis="y", labelsize=20) 

    ax2.tick_params(axis="x", labelsize=20) 
    ax2.tick_params(axis="y", labelsize=20) 
    
# ---------------------------------------------------------------------

    #cooldown = params["rescale_cooldown"]

    # ax1.set_xlim(left=params["season_len"]*2) TODO
    # ax2.set_xlim(left=params["season_len"]*2) TODO
    fig1.set_size_inches(15,8)
    fig2.set_size_inches(15,8)




    plot_main()
    # plot_slack()
    
    fig1.savefig("./2pod"+ args.dep_name +str(len(pred_targets))+".png",bbox_inches='tight')
    # fig2.savefig("./slack"+ args.dep_name +str(len(pred_targets))+".png",bbox_inches='tight')



    
    
    
if __name__ == '__main__':
    main()
